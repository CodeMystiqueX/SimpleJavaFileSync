
# SimpleJavaFileSync
一个简单而高效的文件同步工具，使用 Java 编写。该工具可以将文件从源目录同步到目标目录，仅复制修改时间更新的文件，非常适合用于备份或跨目录/服务器保持文件一致性。
---
## 目录
- 
- [核心功能与特点](#核心功能与特点)
- [适用场景](#适用场景)
- [局限性与改进方向](#局限性与改进方向)
- [与其他工具的对比](#与其他工具的对比)
- [运行要求](#运行要求)
- [安装与使用](#安装与使用)
  - [准备环境](#准备环境)
  - [运行工具](#运行工具)
  - [自动化同步](#自动化同步)
- [代码结构](#代码结构)
- [贡献指南](#贡献指南)
- [许可证](#许可证)
---
## 主要用途
`SimpleJavaFileSync` 的核心功能是**文件同步**，即确保目标目录的内容与源目录保持一致。它可以用于以下几个主要场景：
- **文件备份**：
  - 将重要数据从一个目录定期复制到另一个目录，作为备份。例如，您可以将工作文档同步到外部硬盘或云存储挂载的目录，以防止数据丢失。
  - 在 VPS 或服务器环境中，可以用来备份网站文件、数据库导出文件或其他关键数据。
- **数据镜像**：
  - 保持两个目录的内容完全一致，例如在开发环境中同步代码或配置文件到测试服务器，或者在生产环境中同步静态资源到多个节点，确保一致性。
- **内容分发**：
  - 将文件从一个中心位置分发到多个目标位置。例如，将更新后的软件包、配置文件或媒体资源同步到分布式服务器或客户端。
- **跨设备同步**：
  - 在不同设备之间同步文件，例如将本地电脑的文件同步到远程服务器，或者在多台服务器之间同步数据（需要配合挂载或远程访问工具）。
---
## 核心功能与特点
`SimpleJavaFileSync` 具有以下特点，使其在特定场景下非常实用：
- **基于修改时间的增量同步**：
  - 工具会检查源文件和目标文件的最后修改时间（`lastModifiedTime`），只有当源文件的修改时间晚于目标文件时才会进行复制。这种增量同步方式避免了不必要的文件复制操作，节省时间和资源。
  - 例如，如果目标目录的文件已经是最新版本，工具会跳过该文件，减少系统开销。
- **目录结构保持一致**：
  - 工具会递归遍历源目录，并自动在目标目录中创建相同的目录结构，确保文件的相对路径一致。这对于同步复杂目录树（如项目文件、网站文件）非常有用。
- **错误处理**：
  - 工具能够处理文件访问失败的情况（例如权限不足），并继续处理其他文件，而不会因为单个文件的问题导致整个同步过程失败。
  - 错误信息会输出到控制台，方便用户排查问题。
- **覆盖更新**：
  - 使用 `StandardCopyOption.REPLACE_EXISTING` 参数，工具会覆盖目标目录中已存在的旧文件，确保目标目录的文件内容与源目录一致。
- **跨平台支持**：
  - 由于使用 Java 编写，工具可以在 Windows、Linux、macOS 等多种操作系统上运行，适合不同环境的部署（例如在 VPS 或本地电脑上使用）。
---
## 适用场景
以下是一些具体的应用场景，展示 `SimpleJavaFileSync` 工具的实用价值：
- **个人文件管理**：
  - 同步个人文档、照片或项目文件到备份目录。例如，将工作目录同步到云存储（如 Dropbox、Google Drive 的本地文件夹）。
  - 使用场景：在本地电脑上运行工具，定期将重要文件备份到外部硬盘。
- **服务器数据备份**：
  - 在 VPS 或专用服务器上，定期将网站文件、日志或数据库备份文件同步到另一个目录或挂载的远程存储。
  - 使用场景：VPS 上的 `/var/www/html` 网站文件同步到 `/mnt/backup` 目录，防止因服务器故障或误操作导致数据丢失。
- **开发与测试环境同步**：
  - 开发者可以将本地开发的项目文件同步到测试服务器，或者将配置文件同步到生产环境。
  - 使用场景：将本地代码目录同步到 VPS 上的测试目录，快速部署更新。
- **分布式系统文件一致性**：
  - 在分布式系统中，确保多个节点的文件内容一致，例如同步静态资源（如图片、CSS、JS 文件）到多个 Web 服务器。
  - 使用场景：中心服务器的文件同步到多个边缘节点服务器。
- **自动化任务**：
  - 配合定时任务工具（如 Linux 的 `cron` 或 Windows 的任务计划程序），实现无人值守的文件同步。
  - 使用场景：每天凌晨自动同步服务器日志到备份目录，方便后续分析或归档。
---
## 局限性与改进方向
虽然 `SimpleJavaFileSync` 工具已经实现了基础的文件同步功能，但它也存在一些局限性，这些可以作为未来改进的方向：
- **单向同步限制**：
  - 当前工具仅支持从源目录到目标目录的单向同步，不支持双向同步（即目标目录的修改不会反映到源目录）。如果需要双向同步，可以考虑添加逻辑来比较两个目录的文件状态。
  - **改进方向**：实现双向同步或可选的同步模式（覆盖、合并等）。
- **文件删除未处理**：
  - 如果源目录中删除了某些文件，目标目录中对应的文件不会被删除，可能会导致目标目录积累过多的旧文件。
  - **改进方向**：添加选项，在同步时删除目标目录中不再存在于源目录的文件。
- **性能优化**：
  - 对于非常大的目录或文件，工具的性能可能受限于文件的遍历和复制操作。尤其是网络磁盘或远程挂载目录，同步速度可能较慢。
  - **改进方向**：支持多线程同步，或者添加文件过滤条件（例如只同步特定扩展名的文件）。
- **远程同步支持不足**：
  - 当前工具主要适用于本地文件系统同步。如果源目录或目标目录位于远程服务器，需要通过挂载（如 NFS、SSHFS）或其他方式实现。
  - **改进方向**：集成 SFTP 或其他协议，直接支持远程文件同步。
- **日志与通知**：
  - 当前工具仅将同步信息输出到控制台，缺乏详细的日志记录或错误通知机制。
  - **改进方向**：添加日志文件记录功能，或者在同步失败时发送邮件/SMS 通知。
---
## 与其他工具的对比
`SimpleJavaFileSync` 工具与一些常见文件同步工具（如 `rsync`、Dropbox、OneDrive）相比，有以下特点：
- **与 `rsync` 相比**：
  - `rsync` 是一个功能强大的命令行工具，支持增量同步、文件删除处理、远程同步（通过 SSH）等，且性能更高。但 `rsync` 是系统级工具，配置较复杂。
  - `SimpleJavaFileSync` 是一个轻量级 Java 工具，易于修改和定制，适合特定需求的二次开发，且跨平台运行。
- **与云同步工具（如 Dropbox）相比**：
  - Dropbox 等云服务提供了文件同步、版本控制和远程访问功能，但需要互联网连接，且可能涉及隐私或存储费用问题。
  - `SimpleJavaFileSync` 是本地工具，无需依赖云服务，适合对数据隐私敏感或离线环境的场景.
- **优势**：
  - 完全开源，代码可控，可以根据需求自由修改。
  - 不依赖外部服务，适合私有化部署。
- **劣势**：
  - 功能较简单，缺乏高级特性（如版本控制、冲突解决）。
  - 没有图形界面（GUI），对非技术用户不够友好。
---
## 运行要求
- **Java 8 或更高版本**：确保已安装 Java 运行环境 (JRE) 或开发工具包 (JDK)。
- **操作系统**：兼容 Windows、Linux 或 macOS。
---
## 安装与使用
### 准备环境
1. **安装 Java**：
   确保您的系统已安装 Java 8 或更高版本。您可以通过以下命令检查：
   ```bash
   java -version
   ```
   - 如果未安装 Java，在 Ubuntu/Debian 系统上：
     ```bash
     sudo apt update
     sudo apt install openjdk-11-jdk -y
     ```
   - 在 CentOS/RHEL 系统上：
     ```bash
     sudo yum install java-11-openjdk-devel -y
     ```
   - 在 Windows 上：从 [Oracle 官网](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html) 下载并安装 JDK。
2. **下载工具**：
   - 从 [GitHub 仓库](#) 下载最新的源代码或 JAR 文件（仓库链接待补充）。
   - 或者直接克隆仓库：
     ```bash
     git clone <repository-url>
     cd SimpleJavaFileSync
     ```
3. **编译代码（可选）**：
   如果您下载的是源代码，需要编译：
   ```bash
   javac com/simplejava/FileSync.java
   ```
   或者打包为 JAR 文件：
   ```bash
   jar cfe SimpleJavaFileSync.jar com.simplejava.FileSync com/simplejava/*.class
   ```
### 运行工具
1. **运行 JAR 文件**：
   确保您已经在正确的目录下，运行以下命令：
   ```bash
   java -jar SimpleJavaFileSync.jar /path/to/sourceDir /path/to/targetDir
   ```
   - 替换 `/path/to/sourceDir` 为源目录路径（要同步的目录）。
   - 替换 `/path/to/targetDir` 为目标目录路径（同步到的目录）。
   示例：
   ```bash
   java -jar SimpleJavaFileSync.jar /var/data/source /var/data/backup
   ```
2. **运行编译后的类文件**：
   如果您直接编译了源代码，运行：
   ```bash
   java com.simplejava.FileSync /path/to/sourceDir /path/to/targetDir
   ```
3. **输出说明**：
   工具会在控制台输出同步的文件路径和完成信息，例如：
   ```
   Synced: /var/data/source/test1.txt -> /var/data/backup/test1.txt
   Synced: /var/data/source/test2.txt -> /var/data/backup/test2.txt
   File synchronization completed.
   ```
### 自动化同步
如果您希望定期运行文件同步工具，可以使用系统的定时任务工具：
- **Linux (cron)**：
  编辑 `crontab` 文件：
  ```bash
  crontab -e
  ```
  添加以下内容（每小时运行一次）：
  ```bash
  0 * * * * java -jar /path/to/SimpleJavaFileSync.jar /path/to/sourceDir /path/to/targetDir >> /path/to/sync.log 2>&1
  ```
  您可以根据需要调整时间表达式。
- **Windows (Task Scheduler)**：
  使用任务计划程序创建任务，运行批处理脚本：
  ```bat
  java -jar C:\path\to\SimpleJavaFileSync.jar C:\sourceDir C:\targetDir >> C:\logs\sync.log 2>&1
  ```
---

## 许可证
本项目采用 [MIT 许可证](LICENSE)，您可以自由使用、修改和分发代码，但需保留版权声明。
---
**SimpleJavaFileSync** © 2025. 感谢您的使用与支持！
```
